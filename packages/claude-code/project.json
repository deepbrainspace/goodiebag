{
  "name": "claude-code",
  "$schema": "../../node_modules/nx/schemas/project-schema.json",
  "sourceRoot": "packages/claude-code/src",
  "projectType": "application",
  "tags": ["rust", "cli", "daemon"],
  "targets": {
    "lint": {
      "executor": "@deepbrainspace/nx-rust:lint",
      "options": {
        "toolchain": "stable",
        "target-dir": "{projectRoot}/target"
      }
    },
    "test": {
      "executor": "@deepbrainspace/nx-rust:test",
      "dependsOn": ["lint"],
      "options": {
        "toolchain": "stable",
        "target-dir": "{projectRoot}/target"
      }
    },
    "build": {
      "executor": "@deepbrainspace/nx-rust:build",
      "dependsOn": ["test"],
      "outputs": ["{projectRoot}/target/release/claude-code"],
      "options": {
        "toolchain": "stable",
        "release": true,
        "target-dir": "{projectRoot}/target"
      }
    },
    "build-dev": {
      "executor": "@deepbrainspace/nx-rust:build",
      "dependsOn": ["test"],
      "outputs": ["{projectRoot}/target/debug/claude-code"],
      "options": {
        "toolchain": "stable",
        "release": false,
        "target-dir": "{projectRoot}/target"
      }
    },
    "fmt": {
      "executor": "nx:run-commands",
      "options": {
        "command": "cargo fmt --check",
        "cwd": "packages/claude-code"
      }
    },
    "fmt-fix": {
      "executor": "nx:run-commands",
      "options": {
        "command": "cargo fmt",
        "cwd": "packages/claude-code"
      }
    },
    "run": {
      "executor": "nx:run-commands",
      "options": {
        "command": "cargo run --",
        "cwd": "packages/claude-code"
      }
    },
    "install": {
      "executor": "nx:run-commands",
      "dependsOn": ["build"],
      "options": {
        "commands": [
          "echo 'üîß Installing claude-code binary...'",
          "echo 'Working directory: $(pwd)'",
          "mkdir -p ~/.cargo/bin",
          "cp {projectRoot}/target/release/claude-code ~/.cargo/bin/claude-code",
          "chmod +x ~/.cargo/bin/claude-code",
          "echo 'üîç Checking installation...'",
          "which claude-code || echo 'WARNING: claude-code not found in PATH'",
          "ls -la ~/.cargo/bin/claude-code || echo 'WARNING: Binary not found in ~/.cargo/bin'",
          "echo '‚úÖ claude-code installed to ~/.cargo/bin/claude-code'",
          "echo 'üìù Next steps:'",
          "echo '  1. Add organizations: claude-code org add <org-name>'", 
          "echo '  2. Add repositories: claude-code repo add <owner/repo>'",
          "echo '  3. Install daemon service: claude-code service install'",
          "echo '  4. Check status: claude-code status'"
        ],
        "cwd": "packages/claude-code",
        "parallel": false
      }
    },
    "package": {
      "executor": "nx:run-commands",
      "dependsOn": ["build"],
      "outputs": ["{projectRoot}/target/package"],
      "options": {
        "command": "cargo package --target-dir {projectRoot}/target",
        "cwd": "packages/claude-code"
      }
    },
    "nx-release-publish": {
      "executor": "@monodon/rust:release-publish",
      "dependsOn": ["build", "test", "lint"],
      "options": {
        "toolchain": "stable"
      }
    },
    "nx-release-version": {
      "executor": "@monodon/rust:release-version",
      "options": {
        "toolchain": "stable"
      }
    },
    "version": {
      "executor": "nx:run-commands",
      "options": {
        "command": "cargo metadata --format-version 1 --no-deps | jq -r '.packages[] | select(.name == \"claude-code\") | .version'",
        "cwd": "packages/claude-code"
      }
    },
    "check": {
      "executor": "@monodon/rust:check",
      "options": {
        "toolchain": "stable"
      }
    },
    "clean": {
      "executor": "nx:run-commands",
      "options": {
        "command": "cargo clean --target-dir {projectRoot}/target",
        "cwd": "packages/claude-code"
      }
    },
    "quality": {
      "executor": "nx:run-commands",
      "dependsOn": ["fmt", "lint", "test"],
      "options": {
        "command": "echo '‚úÖ All quality checks passed'",
        "cwd": "packages/claude-code"
      }
    },
    "ci": {
      "executor": "nx:run-commands",
      "dependsOn": ["quality", "build"],
      "options": {
        "command": "echo 'üöÄ CI pipeline completed successfully'",
        "cwd": "packages/claude-code"
      }
    }
  }
}
